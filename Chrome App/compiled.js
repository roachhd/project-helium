if(!b)var b="";var c=30,f=240,g=480,h=30,i=30,j=30,k=30;bgx=y=x=0;bg1y=-480;bg2y=-1440;px=f/2-30;py=g-30;e1x=25;e1y=-45;bg1=new Image;bg1.src=b+"images/background.png";var l=new Image;l.src=b+"images/background.png";var m=new Image;m.src=b+"images/psprite.png";for(var n=!1,o=!1,p=!1,q=!1,r=[],s=3,t=9,u=[],v=0,w=!0,z=3,A=!1,B=null,C=null,D=0;D<3;D++)r.push([e1x,e1y,j,k,s]),e1x+=j+50;function E(){z-=1;z>0?F():z==0&&(w=!1)}
function F(){var a=25;px=f/2-30;py=g-30;i=h=30;for(var d=0;d<r.length;d++)r[d][0]=a,r[d][1]=-45,a=a+j+50,v=0}function G(){A=!0;B.removeEventListener("click",G,!1)}
function H(){B.width=B.width;C.drawImage(bg1,bgx,bg1y);C.drawImage(l,bgx,bg2y);bg1y+=2;bg2y+=2;bg1y==480&&(bg1y=-1440);bg2y==480&&(bg2y=-1440);if(w&&A&&z>0){for(var a=0;a<r.length;a++)r[a][1]<g?r[a][1]+=r[a][4]:r[a][1]>g-1&&(r[a][1]=-45);for(a=0;a<u.length;a++)u[a][1]>-11?u[a][1]-=10:u[a][1]<-10&&u.splice(a,1);for(a=0;a<r.length;a++)C.fillStyle="#f00",C.fillRect(r[a][0],r[a][1],j,k);p?px+=5:q&&(px-=5);n?py-=5:o&&(py+=5);px>f-31&&(px=f-30);px<1&&(px=0);py>g-31&&(py=g-30);py<1&&(py=0);C.drawImage(m,
px,py);if(u.length)for(a=0;a<u.length;a++)C.fillStyle="#f00",C.fillRect(u[a][0],u[a][1],u[a][2],u[a][3],u[a][4],u[a][5],u[a][6],u[a][7],u[a][8],u[a][9],u[a][10]);for(var a=px+h,d=py+i,e=0;e<r.length;e++)px>r[e][0]&&px<r[e][0]+j&&py<r[e][1]+k&&E(),a<r[e][0]+j&&a>r[e][0]&&py>r[e][1]&&py<r[e][1]+k&&E(),d>r[e][1]&&d<r[e][1]+k&&px>r[e][0]&&px<r[e][0]+j&&E(),d>r[e][1]&&d<r[e][1]+k&&a<r[e][0]+j&&a>r[e][0]&&E();a=!1;for(d=0;d<u.length;d++){for(e=0;e<r.length;e++)u[d][1]<=r[e][1]+r[e][3]&&u[d][0]>=r[e][0]&&
u[d][0]<=r[e][0]+r[e][2]&&(a=!0,r.splice(e,1),v+=10,r.push([Math.random()*200+25,-45,j,k,s]));a==!0&&(u.splice(d,1),a=!1)}}C.font="bold 18px Arial";C.fillStyle="#fff";C.fillRect(10,10,100,50);C.fillStyle="#0f0";C.fillText("Score: ",10,55);C.fillText(v,70,55);C.fillText("Lives:",10,30);C.fillText(z,68,30);if(!w)C.fillText("Game Over!",f/2-55,g/2),C.fillRect(f/2-53,g/2+10,100,40),C.fillStyle="#000",C.fillText("Continue?",f/2-48,g/2+35),B.addEventListener("click",I,!1);if(!A)C.fillStyle="#fff",C.fillRect(0,
0,f,g),C.fillStyle="#0f0",C.font="bold 32px Arial",C.fillText("Project Helium",f/2-110,g/2),C.font="bold 20px Arial",C.fillText("Click to Play",f/2-56,g/2+30),C.fillText("Use ASWD to move",f/2-100,g/2+60),C.fillText("Use the j key to shoot",f/2-100,g/2+90);game=setTimeout(H,1E3/c)}function J(a){a.keyCode==68?p=!0:a.keyCode==65&&(q=!0);a.keyCode==87?n=!0:a.keyCode==83&&(o=!0);a.keyCode==74&&u.length<=t&&u.push([px+15,py-30,4,20])}
function K(a){a.keyCode==68?p=!1:a.keyCode==65&&(q=!1);a.keyCode==87?n=!1:a.keyCode==83&&(o=!1)}function I(a){var d;a.pageX||a.pageY?(d=a.pageX,a=a.pageY):(d=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=a.clientY+document.body.scrollTop+document.documentElement.scrollTop);d-=B.offsetLeft;a-=B.offsetTop;d=new L(d,a);d.x>f/2-53&&d.x<f/2+47&&d.y>g/2+10&&d.y<g/2+50&&(w=!0,z=3,F(),B.removeEventListener("click",I,!1))}function L(a,d){this.x=a;this.y=d}
window.onload=function(){B=document.getElementById("helium");C=B.getContext("2d");B.width=f;B.height=g;C.drawImage(bg1,0,0);document.addEventListener("keydown",J,!1);document.addEventListener("keyup",K,!1);document.addEventListener("click",G,!1);H()};
